!function($){$.fn.inputlimiter=function(options){{var opts=$.extend({},$.fn.inputlimiter.defaults,options);$(this)}opts.boxAttach&&!$("#"+opts.boxId).length&&($("<div/>").appendTo("body").attr({id:opts.boxId,"class":opts.boxClass}).css({position:"absolute"}).hide(),$.fn.bgiframe&&$("#"+opts.boxId).bgiframe());var inputlimiterKeyup=function(){var $this=$(this),count=counter($this.val());!opts.allowExceed&&count>opts.limit&&$this.val(truncater($this.val())),opts.boxAttach&&$("#"+opts.boxId).css({width:$this.outerWidth()-($("#"+opts.boxId).outerWidth()-$("#"+opts.boxId).width())+"px",left:$this.offset().left+"px",top:$this.offset().top+$this.outerHeight()-1+"px","z-index":2e3});var charsRemaining=opts.limit-count>0?opts.limit-count:0,remText=opts.remTextFilter(opts,charsRemaining),limitText=opts.limitTextFilter(opts);if(opts.limitTextShow){$("#"+opts.boxId).html(remText+" "+limitText);var textWidth=$("<span/>").appendTo("body").attr({id:"19cc9195583bfae1fad88e19d443be7a","class":opts.boxClass}).html(remText+" "+limitText).innerWidth();$("#19cc9195583bfae1fad88e19d443be7a").remove(),textWidth>$("#"+opts.boxId).innerWidth()&&$("#"+opts.boxId).html(remText+"<br />"+limitText),$("#"+opts.boxId).show()}else $("#"+opts.boxId).html(remText).show()},inputlimiterKeypress=function(e){var count=counter($(this).val());if(!opts.allowExceed&&count>opts.limit){var modifierKeyPressed=e.ctrlKey||e.altKey||e.metaKey;if(!modifierKeyPressed&&e.which>=32&&e.which<=122&&this.selectionStart===this.selectionEnd)return!1}},inputlimiterBlur=function(){var $this=$(this);if(count=counter($this.val()),!opts.allowExceed&&count>opts.limit&&$this.val(truncater($this.val())),opts.boxAttach)$("#"+opts.boxId).fadeOut("fast");else if(opts.remTextHideOnBlur){var limitText=opts.limitText;limitText=limitText.replace(/\%n/g,opts.limit),limitText=limitText.replace(/\%s/g,1===opts.limit?"":"s"),$("#"+opts.boxId).html(limitText)}},counter=function(value){if("words"===opts.limitBy.toLowerCase())return value.length>0?$.trim(value).replace(/\ +(?= )/g,"").split(" ").length:0;var count=value.length,newlines=value.match(/\n/g);return newlines&&opts.lineReturnCount>1&&(count+=newlines.length*(opts.lineReturnCount-1)),count},truncater=function(value){return"words"===opts.limitBy.toLowerCase()?$.trim(value).replace(/\ +(?= )/g,"").split(" ").splice(0,opts.limit).join(" ")+" ":value.substring(0,opts.limit)};$(this).each(function(){var $this=$(this);(!options||!options.limit)&&opts.useMaxlength&&parseInt($this.attr("maxlength"))>0&&parseInt($this.attr("maxlength"))!=opts.limit?$this.inputlimiter($.extend({},opts,{limit:parseInt($this.attr("maxlength"))})):(!opts.allowExceed&&opts.useMaxlength&&"characters"===opts.limitBy.toLowerCase()&&$this.attr("maxlength",opts.limit),$this.unbind(".inputlimiter"),$this.bind("keyup.inputlimiter",inputlimiterKeyup),$this.bind("keypress.inputlimiter",inputlimiterKeypress),$this.bind("blur.inputlimiter",inputlimiterBlur))})},$.fn.inputlimiter.remtextfilter=function(opts,charsRemaining){var remText=opts.remText;return 0===charsRemaining&&null!==opts.remFullText&&(remText=opts.remFullText),remText=remText.replace(/\%n/g,charsRemaining),remText=remText.replace(/\%s/g,opts.zeroPlural?1===charsRemaining?"":"s":1>=charsRemaining?"":"s")},$.fn.inputlimiter.limittextfilter=function(opts){var limitText=opts.limitText;return limitText=limitText.replace(/\%n/g,opts.limit),limitText=limitText.replace(/\%s/g,opts.limit<=1?"":"s")},$.fn.inputlimiter.defaults={limit:255,boxAttach:!0,boxId:"limiterBox",boxClass:"limiterBox",remText:"%n character%s remaining.",remTextFilter:$.fn.inputlimiter.remtextfilter,remTextHideOnBlur:!0,remFullText:null,limitTextShow:!0,limitText:"Field limited to %n character%s.",limitTextFilter:$.fn.inputlimiter.limittextfilter,zeroPlural:!0,allowExceed:!1,useMaxlength:!0,limitBy:"characters",lineReturnCount:1}}(jQuery);