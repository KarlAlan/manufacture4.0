!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){var old=$.fn.wizard,Wizard=function(element,options){var kids;this.$element=$(element),this.options=$.extend({},$.fn.wizard.defaults,options),this.options.disablePreviousStep="previous"===this.$element.attr("data-restrict")?!0:this.options.disablePreviousStep,this.currentStep=this.options.selectedItem.step,this.numSteps=this.$element.find(".steps li").length,this.$prevBtn=this.$element.find("button.btn-prev"),this.$nextBtn=this.$element.find("button.btn-next"),kids=this.$nextBtn.children().detach(),this.nextText=$.trim(this.$nextBtn.text()),this.$nextBtn.append(kids),this.$prevBtn.on("click.fu.wizard",$.proxy(this.previous,this)),this.$nextBtn.on("click.fu.wizard",$.proxy(this.next,this)),this.$element.on("click.fu.wizard","li.complete",$.proxy(this.stepclicked,this)),this.selectedItem(this.options.selectedItem),this.options.disablePreviousStep&&(this.$prevBtn.attr("disabled",!0),this.$element.find(".steps").addClass("previous-disabled"))};Wizard.prototype={constructor:Wizard,destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},addSteps:function(index){var i,l,$pane,$startPane,$startStep,$step,items=[].slice.call(arguments).slice(1),$steps=this.$element.find(".steps"),$stepContent=this.$element.find(".step-content");for(index=-1===index||index>this.numSteps+1?this.numSteps+1:index,items[0]instanceof Array&&(items=items[0]),$startStep=$steps.find("li:nth-child("+index+")"),$startPane=$stepContent.find(".step-pane:nth-child("+index+")"),$startStep.length<1&&($startStep=null),i=0,l=items.length;l>i;i++)$step=$('<li data-step="'+index+'"><span class="badge badge-info"></span></li>'),$step.append(items[i].label||"").append('<span class="chevron"></span>'),$step.find(".badge").append(items[i].badge||index),$pane=$('<div class="step-pane" data-step="'+index+'"></div>'),$pane.append(items[i].pane||""),$startStep?($startStep.before($step),$startPane.before($pane)):($steps.append($step),$stepContent.append($pane)),index++;this.syncSteps(),this.numSteps=$steps.find("li").length,this.setState()},removeSteps:function(index,howMany){var $start,action="nextAll",i=0,$steps=this.$element.find(".steps"),$stepContent=this.$element.find(".step-content");howMany=void 0!==howMany?howMany:1,index>$steps.find("li").length?$start=$steps.find("li:last"):($start=$steps.find("li:nth-child("+index+")").prev(),$start.length<1&&(action="children",$start=$steps)),$start[action]().each(function(){var item=$(this),step=item.attr("data-step");return howMany>i?(item.remove(),$stepContent.find('.step-pane[data-step="'+step+'"]:first').remove(),void i++):!1}),this.syncSteps(),this.numSteps=$steps.find("li").length,this.setState()},setState:function(){var canMovePrev=this.currentStep>1,firstStep=1===this.currentStep,lastStep=this.currentStep===this.numSteps;this.options.disablePreviousStep||this.$prevBtn.attr("disabled",firstStep===!0||canMovePrev===!1);var last=this.$nextBtn.attr("data-last");if(last){this.lastText=last;var text=this.nextText;lastStep===!0?(text=this.lastText,this.$element.addClass("complete")):this.$element.removeClass("complete");var kids=this.$nextBtn.children().detach();this.$nextBtn.text(text).append(kids)}var $steps=this.$element.find(".steps li");$steps.removeClass("active").removeClass("complete"),$steps.find("span.badge").removeClass("badge-info").removeClass("badge-success");var prevSelector=".steps li:lt("+(this.currentStep-1)+")",$prevSteps=this.$element.find(prevSelector);$prevSteps.addClass("complete"),$prevSteps.find("span.badge").addClass("badge-success");var currentSelector=".steps li:eq("+(this.currentStep-1)+")",$currentStep=this.$element.find(currentSelector);$currentStep.addClass("active"),$currentStep.find("span.badge").addClass("badge-info");var $stepContent=this.$element.find(".step-content"),target=$currentStep.attr("data-step");if($stepContent.find(".step-pane").removeClass("active"),$stepContent.find('.step-pane[data-step="'+target+'"]:first').addClass("active"),"undefined"!=typeof this.initialized){var e=$.Event("changed.fu.wizard");this.$element.trigger(e,{step:this.currentStep})}this.initialized=!0},stepclicked:function(e){var li=$(e.currentTarget),index=this.$element.find(".steps li").index(li),canMovePrev=!0;if(this.options.disablePreviousStep&&index<this.currentStep&&(canMovePrev=!1),canMovePrev){var evt=$.Event("stepclicked.fu.wizard");if(this.$element.trigger(evt,{step:index+1}),evt.isDefaultPrevented())return;this.currentStep=index+1,this.setState()}},syncSteps:function(){var i=1,$steps=this.$element.find(".steps"),$stepContent=this.$element.find(".step-content");$steps.children().each(function(){var item=$(this),badge=item.find(".badge"),step=item.attr("data-step");isNaN(parseInt(badge.html(),10))||badge.html(i),item.attr("data-step",i),$stepContent.find('.step-pane[data-step="'+step+'"]:last').attr("data-step",i),i++})},previous:function(){var canMovePrev=this.currentStep>1;if(this.options.disablePreviousStep&&(canMovePrev=!1),canMovePrev){var e=$.Event("actionclicked.fu.wizard");if(this.$element.trigger(e,{step:this.currentStep,direction:"previous"}),e.isDefaultPrevented())return;this.currentStep-=1,this.setState()}this.$prevBtn.is(":disabled")?this.$nextBtn.focus():this.$prevBtn.focus()},next:function(){var canMoveNext=this.currentStep+1<=this.numSteps,lastStep=this.currentStep===this.numSteps;if(canMoveNext){var e=$.Event("actionclicked.fu.wizard");if(this.$element.trigger(e,{step:this.currentStep,direction:"next"}),e.isDefaultPrevented())return;this.currentStep+=1,this.setState()}else lastStep&&this.$element.trigger("finished.fu.wizard");this.$nextBtn.is(":disabled")?this.$prevBtn.focus():this.$nextBtn.focus()},selectedItem:function(selectedItem){var retVal,step;return selectedItem?(step=selectedItem.step||-1,step>=1&&step<=this.numSteps?(this.currentStep=step,this.setState()):(step=this.$element.find(".steps li.active:first").attr("data-step"),isNaN(step)||(this.currentStep=parseInt(step,10),this.setState())),retVal=this):retVal={step:this.currentStep},retVal}},$.fn.wizard=function(option){var methodReturn,args=Array.prototype.slice.call(arguments,1),$set=this.each(function(){var $this=$(this),data=$this.data("fu.wizard"),options="object"==typeof option&&option;data||$this.data("fu.wizard",data=new Wizard(this,options)),"string"==typeof option&&(methodReturn=data[option].apply(data,args))});return void 0===methodReturn?$set:methodReturn},$.fn.wizard.defaults={disablePreviousStep:!1,selectedItem:{step:-1}},$.fn.wizard.Constructor=Wizard,$.fn.wizard.noConflict=function(){return $.fn.wizard=old,this},$(document).on("mouseover.fu.wizard.data-api","[data-initialize=wizard]",function(e){var $control=$(e.target).closest(".wizard");$control.data("fu.wizard")||$control.wizard($control.data())}),$(function(){$("[data-initialize=wizard]").each(function(){var $this=$(this);$this.data("fu.wizard")||$this.wizard($this.data())})})});