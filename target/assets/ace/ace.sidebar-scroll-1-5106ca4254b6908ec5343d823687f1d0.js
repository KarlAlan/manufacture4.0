!function($,undefined){function Sidebar_Scroll(sidebar,settings){var self=this,$window=$(window),$sidebar=$(sidebar),$nav=$sidebar.find(".nav-list"),$toggle=$sidebar.find(".sidebar-toggle").eq(0),$shortcuts=$sidebar.find(".sidebar-shortcuts").eq(0),ace_sidebar=$sidebar.ace_sidebar("ref");$sidebar.attr("data-sidebar-scroll","true");var nav=$nav.get(0);if(nav){var scroll_div=null,scroll_content=null,scroll_content_div=null,bar=null,track=null,ace_scroll=null,scroll_to_active=settings.scroll_to_active||ace.helper.boolAttr(sidebar,"data-scroll-to-active")||!1,include_shortcuts=settings.include_shortcuts||ace.helper.boolAttr(sidebar,"data-scroll-include-shortcuts")||!1,include_toggle=settings.include_toggle||ace.helper.boolAttr(sidebar,"data-scroll-include-toggle")||!1,smooth_scroll=settings.smooth_scroll||ace.helper.intAttr(sidebar,"data-scroll-smooth")||!1,scrollbars_outside=settings.outside||ace.helper.boolAttr(sidebar,"data-scroll-outside")||!1,scroll_style=settings.scroll_style||$sidebar.attr("data-scroll-style")||"",lockAnyway=settings.mousewheel_lock||ace.helper.boolAttr(sidebar,"data-mousewheel-lock")||!1;this.is_scrolling=!1;var _initiated=!1;this.sidebar_fixed=is_element_pos(sidebar,"fixed");var $avail_height,$content_height,available_height=function(){var offset=$nav.parent().offset();return self.sidebar_fixed&&(offset.top-=ace.helper.scrollTop()),$window.innerHeight()-offset.top-(include_toggle?0:$toggle.outerHeight())},content_height=function(){return nav.clientHeight},initiate=function(on_page_load){if(!_initiated&&self.sidebar_fixed){$nav.wrap('<div class="nav-wrap-up pos-rel" />'),$nav.after("<div><div></div></div>"),$nav.wrap('<div class="nav-wrap" />'),include_toggle||$toggle.css({"z-index":1}),include_shortcuts||$shortcuts.css({"z-index":99}),scroll_div=$nav.parent().next().ace_scroll({size:available_height(),mouseWheelLock:!0,hoverReset:!1,dragEvent:!0,styleClass:scroll_style,touchDrag:!1}).closest(".ace-scroll").addClass("nav-scroll"),ace_scroll=scroll_div.data("ace_scroll"),scroll_content=scroll_div.find(".scroll-content").eq(0),scroll_content_div=scroll_content.find(" > div").eq(0),track=$(ace_scroll.get_track()),bar=track.find(".scroll-bar").eq(0),include_shortcuts&&0!=$shortcuts.length&&($nav.parent().prepend($shortcuts).wrapInner("<div />"),$nav=$nav.parent()),include_toggle&&0!=$toggle.length&&($nav.append($toggle),$nav.closest(".nav-wrap").addClass("nav-wrap-t")),$nav.css({position:"relative"}),scrollbars_outside===!0&&scroll_div.addClass("scrollout"),nav=$nav.get(0),nav.style.top=0,scroll_content.on("scroll.nav",function(){nav.style.top=-1*this.scrollTop+"px"}),$nav.on($.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(event){return self.is_scrolling&&ace_scroll.is_active()?scroll_div.trigger(event):!lockAnyway}),$nav.on("mouseenter.ace_scroll",function(){track.addClass("scroll-hover")}).on("mouseleave.ace_scroll",function(){track.removeClass("scroll-hover")});var content=scroll_content.get(0);if($nav.on("ace_drag.nav",function(event){if(!self.is_scrolling||!ace_scroll.is_active())return void(event.retval.cancel=!0);if(0!=$(event.target).closest(".can-scroll").length)return void(event.retval.cancel=!0);if("up"==event.direction||"down"==event.direction){ace_scroll.move_bar(!0);var distance=event.dy;distance=parseInt(Math.min($avail_height,distance)),Math.abs(distance)>2&&(distance=2*distance),0!=distance&&(content.scrollTop=content.scrollTop+distance,nav.style.top=-1*content.scrollTop+"px")}}),smooth_scroll&&$nav.on("touchstart.nav MSPointerDown.nav pointerdown.nav",function(){$nav.css("transition-property","none"),bar.css("transition-property","none")}).on("touchend.nav touchcancel.nav MSPointerUp.nav MSPointerCancel.nav pointerup.nav pointercancel.nav",function(){$nav.css("transition-property","top"),bar.css("transition-property","top")}),old_safari&&!include_toggle){var toggle=$toggle.get(0);toggle&&scroll_content.on("scroll.safari",function(){ace.helper.redraw(toggle)})}if(_initiated=!0,1==on_page_load&&(self.reset(),scroll_to_active&&self.scroll_to_active(),scroll_to_active=!1),"number"==typeof smooth_scroll&&smooth_scroll>0&&($nav.css({"transition-property":"top","transition-duration":(smooth_scroll/1e3).toFixed(2)+"s"}),bar.css({"transition-property":"top","transition-duration":(smooth_scroll/1500).toFixed(2)+"s"}),scroll_div.on("drag.start",function(e){e.stopPropagation(),$nav.css("transition-property","none")}).on("drag.end",function(e){e.stopPropagation(),$nav.css("transition-property","top")})),ace.vars.android){var val=ace.helper.scrollTop();2>val&&(window.scrollTo(val,0),setTimeout(function(){self.reset()},20));var new_height,last_height=ace.helper.winHeight();$(window).on("scroll.ace_scroll",function(){self.is_scrolling&&ace_scroll.is_active()&&(new_height=ace.helper.winHeight(),new_height!=last_height&&(last_height=new_height,self.reset()))})}}};this.scroll_to_active=function(){if(ace_scroll&&ace_scroll.is_active())try{var $active,vars=ace_sidebar.vars(),nav_list=$sidebar.find(".nav-list");vars.minimized&&!vars.collapsible?$active=nav_list.find("> .active"):($active=$nav.find("> .active.hover"),0==$active.length&&($active=$nav.find(".active:not(.open)")));var top=$active.outerHeight();nav_list=nav_list.get(0);for(var active=$active.get(0);active!=nav_list;)top+=active.offsetTop,active=active.parentNode;var scroll_amount=top-scroll_div.height();scroll_amount>0&&(nav.style.top=-scroll_amount+"px",scroll_content.scrollTop(scroll_amount))}catch(e){}},this.reset=function(recalc){if(recalc===!0&&(this.sidebar_fixed=is_element_pos(sidebar,"fixed")),!this.sidebar_fixed)return void this.disable();_initiated||initiate();var vars=ace_sidebar.vars(),enable_scroll=!vars.collapsible&&!vars.horizontal&&($avail_height=available_height())<($content_height=nav.clientHeight);this.is_scrolling=!0,enable_scroll&&(scroll_content_div.css({height:$content_height,width:8}),scroll_div.prev().css({"max-height":$avail_height}),ace_scroll.update({size:$avail_height}),ace_scroll.enable(),ace_scroll.reset()),enable_scroll&&ace_scroll.is_active()?$sidebar.addClass("sidebar-scroll"):this.is_scrolling&&this.disable()},this.disable=function(){this.is_scrolling=!1,scroll_div&&(scroll_div.css({height:"","max-height":""}),scroll_content_div.css({height:"",width:""}),scroll_div.prev().css({"max-height":""}),ace_scroll.disable()),parseInt(nav.style.top)<0&&smooth_scroll&&$.support.transition.end?$nav.one($.support.transition.end,function(){$sidebar.removeClass("sidebar-scroll"),$nav.off(".trans")}):$sidebar.removeClass("sidebar-scroll"),nav.style.top=0},this.prehide=function(height_change){if(this.is_scrolling&&!ace_sidebar.get("minimized"))if(content_height()+height_change<available_height())this.disable();else if(0>height_change){var scroll_top=scroll_content.scrollTop()+height_change;if(0>scroll_top)return;nav.style.top=-1*scroll_top+"px"}},this._reset=function(recalc){recalc===!0&&(this.sidebar_fixed=is_element_pos(sidebar,"fixed")),ace.vars.webkit?setTimeout(function(){self.reset()},0):this.reset()},this.set_hover=function(){track&&track.addClass("scroll-hover")},this.get=function(name){return this.hasOwnProperty(name)?this[name]:void 0},this.set=function(name,value){this.hasOwnProperty(name)&&(this[name]=value)},this.ref=function(){return this},this.updateStyle=function(styleClass){null!=ace_scroll&&ace_scroll.update({styleClass:styleClass})},$sidebar.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(e){e.stopPropagation(),ace_sidebar.get("minimized")||(self._reset(),"shown"==e.type&&self.set_hover())}),initiate(!0)}}var old_safari=ace.vars.safari&&navigator.userAgent.match(/version\/[1-5]/i),is_element_pos="getComputedStyle"in window?function(el,pos){return el.offsetHeight,window.getComputedStyle(el).position==pos}:function(el,pos){return el.offsetHeight,$(el).css("position")==pos};$(document).on("settings.ace.sidebar_scroll",function(ev,event_name){$(".sidebar[data-sidebar-scroll=true]").each(function(){var $this=$(this),sidebar_scroll=$this.ace_sidebar_scroll("ref");if("sidebar_collapsed"==event_name&&is_element_pos(this,"fixed"))"true"==$this.attr("data-sidebar-hover")&&$this.ace_sidebar_hover("reset"),sidebar_scroll._reset();else if("sidebar_fixed"===event_name||"navbar_fixed"===event_name){var is_scrolling=sidebar_scroll.get("is_scrolling"),sidebar_fixed=is_element_pos(this,"fixed");sidebar_scroll.set("sidebar_fixed",sidebar_fixed),sidebar_fixed&&!is_scrolling?sidebar_scroll._reset():sidebar_fixed||sidebar_scroll.disable()}})}),$(window).on("resize.ace.sidebar_scroll",function(){$(".sidebar[data-sidebar-scroll=true]").each(function(){var $this=$(this);"true"==$this.attr("data-sidebar-hover")&&$this.ace_sidebar_hover("reset");var sidebar_scroll=$(this).ace_sidebar_scroll("ref"),sidebar_fixed=is_element_pos(this,"fixed");sidebar_scroll.set("sidebar_fixed",sidebar_fixed),sidebar_scroll._reset()})}),$.fn.ace_sidebar_scroll||($.fn.ace_sidebar_scroll=function(option,value){var method_call,$set=this.each(function(){var $this=$(this),data=$this.data("ace_sidebar_scroll"),options="object"==typeof option&&option;data||$this.data("ace_sidebar_scroll",data=new Sidebar_Scroll(this,options)),"string"==typeof option&&"function"==typeof data[option]&&(method_call=data[option](value))});return method_call===undefined?$set:method_call})}(window.jQuery);