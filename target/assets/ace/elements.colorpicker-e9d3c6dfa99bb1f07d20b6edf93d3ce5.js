!function($,undefined){var Ace_Colorpicker=function(element,option){var options=$.extend({},$.fn.ace_colorpicker.defaults,option),$element=$(element),color_list="",color_selected="",selection=null,color_array=[];$element.addClass("hide").find("option").each(function(){var $class="colorpick-btn",color=this.value.replace(/[^\w\s,#\(\)\.]/g,"");this.value!=color&&(this.value=color),this.selected&&($class+=" selected",color_selected=color),color_array.push(color),color_list+='<li><a class="'+$class+'" href="#" style="background-color:'+color+';" data-color="'+color+'"></a></li>'}).end().on("change.color",function(){$element.next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker">		<a data-toggle="dropdown" class="dropdown-toggle" '+(options.auto_pos?'data-position="auto"':"")+' href="#"><span class="btn-colorpicker" style="background-color:'+color_selected+'"></span></a><ul class="dropdown-menu'+(options.caret?" dropdown-caret":"")+(options.pull_right?" dropdown-menu-right":"")+'">'+color_list+"</ul></div>");var dropdown=$element.next().find(".dropdown-menu");dropdown.on(ace.click_event,function(e){var a=$(e.target);if(!a.is(".colorpick-btn"))return!1;selection&&selection.removeClass("selected"),selection=a,selection.addClass("selected");var color=selection.data("color");return $element.val(color).trigger("change"),e.preventDefault(),!0}),selection=$element.next().find("a.selected"),this.pick=function(index,insert){if("number"==typeof index){if(index>=color_array.length)return;element.selectedIndex=index,dropdown.find("a:eq("+index+")").trigger(ace.click_event)}else if("string"==typeof index){var color=index.replace(/[^\w\s,#\(\)\.]/g,"");if(index=color_array.indexOf(color),-1==index&&insert===!0&&(color_array.push(color),$("<option />").appendTo($element).val(color),$('<li><a class="colorpick-btn" href="#"></a></li>').appendTo(dropdown).find("a").css("background-color",color).data("color",color),index=color_array.length-1),-1==index)return;dropdown.find("a:eq("+index+")").trigger(ace.click_event)}},this.destroy=function(){$element.removeClass("hide").off("change.color").next().remove(),color_array=[]}};$.fn.ace_colorpicker=function(option,value){var retval,$set=this.each(function(){var $this=$(this),data=$this.data("ace_colorpicker"),options="object"==typeof option&&option;data||$this.data("ace_colorpicker",data=new Ace_Colorpicker(this,options)),"string"==typeof option&&(retval=data[option](value))});return retval===undefined?$set:retval},$.fn.ace_colorpicker.defaults={pull_right:!1,caret:!0,auto_pos:!0}}(window.jQuery);